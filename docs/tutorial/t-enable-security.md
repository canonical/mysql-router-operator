# Enable TLS for MySQL Router

This is part of the [MySQL Router Tutorial](/t/12332). Please refer to this page for more information and the overview of the content.

## Transport Layer Security (TLS)

[TLS](https://en.wikipedia.org/wiki/Transport_Layer_Security) is used to encrypt data exchanged between two applications; it secures data transmitted over the network. Typically, enabling TLS within a highly available database, and between a highly available database and client/server applications, requires domain-specific knowledge and a high level of expertise. Fortunately, the domain-specific knowledge has been encoded into MySQL Router and Charmed MySQL. This means (re-)configuring TLS is readily available and requires minimal effort on your end.

Again, relations come in handy here as TLS is enabled via relations; i.e. by relating operators to the [TLS Certificates Charm](https://charmhub.io/tls-certificates-operator). The TLS Certificates Charm centralises TLS certificate management in a consistent manner and handles providing, requesting, and renewing TLS certificates.

### Configure TLS

Before enabling TLS on Charmed MySQL we must first deploy the `tls-certificates-operator` charm:
```shell
juju deploy tls-certificates-operator --config generate-self-signed-certificates="true" --config ca-common-name="Tutorial CA" --channel "legacy/stable"
```

Wait until the `tls-certificates-operator` is up and active, use `juju status --watch 1s` to monitor the progress:
```shell
TODO
```
*Note: this tutorial uses [self-signed certificates](https://en.wikipedia.org/wiki/Self-signed_certificate); self-signed certificates should not be used in a production cluster.*

### Add external TLS certificate

There is no need in TLS between the client application "data-integrator" and MySQL Router as the local unix socket connection is used. However to enable TLS between MySQL server and MySQL Router, relate the those two applications:
```shell
juju integrate mysql tls-certificates-operator
```
Congratulations! Your connection between MySQL Router and MySQL server is now using TLS certificate generated by the external application `tls-certificates-operator`.

### Remove external TLS certificate

To remove the external TLS and return to the locally generate one, unrelate applications:
```shell
juju remove-relation mysql tls-certificates-operator
```